<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Masari Miner</title>
  </head>
  <body>
    <h1>Masari One Click Miner</h1>

    <div align=center style="padding-top: 25px">
      <button type="button" onClick="startMining()">Start Mining!</button>
    </div>
    <div align=center style="padding-top: 10px">
      <button type="button" onClick="stopMining()">Stop Mining</button>
    </div>

    <script>
      require('./renderer.js')
      const electron = require('electron')

      var fs = require('fs');

      if(!fs.existsSync('pools.txt')) {
        const BrowserWindow = electron.remote.BrowserWindow;
        let win = new BrowserWindow({width:400, height: 450});
        win.on('close', function() { win = null });
        win.loadFile('setup.html');
        win.show();
      }  
      
      var child;

      function startMining() {
        var childProcess = require('child_process');
        if (process.platform === "win32") {
          child = childProcess.spawn('msr-stak.exe');
        }
        else {
          child = childProcess.spawn('./msr-stak');
        }
      }

      function stopMining() {
        child.kill();
      }
    </script>
  </body>
</html>
